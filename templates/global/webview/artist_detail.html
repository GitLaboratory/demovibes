{% extends "base/base.html" %}

{% block title %}{{ object.handle }}{% endblock %}

{% block main %}
{% load dv_extend %}<h2><img class="icon_header" src="{{ MEDIA_URL }}user_green.png" alt="" /><span class="header">Artist Info{% if user.is_staff %} [<a href="/admin/webview/artist/{{ object.id }}/">Edit Artist Info</a>]{% endif %}</h2>
<table>
<tr>
<td class="artist_details" valign="top">
{% if object.artist_pic %}<img class="artist_logo" src="{{ object.artist_pic.url }}" alt="{{ object.handle }}" align="left">{% else %}<img class="artist_logo" src="/static/no_artist_pic.png" alt="No Picture" align="left">{% endif %}
</td>
<td class="artist_information" valign="top">
<strong>{{ object.handle }}</strong><br />

Status: {{ object.get_status_display }}<br>
{% if object.link_to_user %}
 <a href="/demovibes/user/{{ object.link_to_user.username }}/">View Artist's User Page</a><br />
{% endif %}

{% if object.alias_of %}
 <strong>This is an alias of : {% with object.alias_of as A%}{% include "webview/t/artist.html" %}{% endwith %}!</strong><br />
{% endif %}

{% if object.groups.all %}
 Groups : {% for group in object.groups.all %}{% with group as G %}{% include "webview/t/group.html" %}{% endwith %} {% endfor %}<br />
{% endif %}

{% if object.aliases.all %}
 Aliases: {% for alias  in object.aliases.all %}<a href="{{ alias.get_absolute_url }}">{{ alias }}</a>{% if forloop.last %}{% else %}, {% endif %}{% endfor %}<br />
{% endif %}
<br />

{% if object.name %}
 Name : {{ object.name }}<br />
{% endif %}

Location: {{ object.home_country|flag|safe }} {% if object.home_location %}{{ object.home_location }}{% endif %}<br>

{% if object.dob %}
 Born : {{ object.dob|date:"F j, Y" }}<br />
{% endif %}

{% if object.last_fm_id %}
 Last.FM: <a href="http://www.last.fm/music/{{ object.last_fm_id }}" target="_new">Visit Artists Last.FM Profile</a><br>
{% endif %}

{% if object.hol_id %}
 Hall of Light Profile: <a href="http://hol.abime.net/hol_search.php?N_ref_artist={{ object.hol_id }}" target="_new">See H.O.L. Artist Profile</a><br>
{% endif %}

{% ifnotequal object.labels.count 0 %}
 Associated Labels: {% for labels in object.labels.all %}{% with labels as L %}{% include "webview/t/label.html" %}{% if forloop.last %} {% else %}, {% endif %}{% endwith %}{% endfor %}<br>
{% endifnotequal %}

{% if object.wiki_link %}
 <a href="{{ object.wiki_link }}">Visit {{ object.handle }}'s Wiki Page</a><br> 
{% endif %}

{% if object.info %}
<br>Additional Information:<br>
<p><i>{{ object.info|urlize|bbcode|linebreaks }}</i></p>
{% endif %}<br>

{% if object.webpage %}
<br /><a href="{{ object.webpage }}" target="_new">Artist's Website</a><br />
{% endif %}

{% ifequal object.status "A" %}
 <a href="{{ object.get_absolute_url }}upload/">Upload a new song by this artist</a><br>
{% else %}
 <strong>Artist Locked For Uploading!</strong><br>
{% endifequal %}
<br>
{% if object.last_updated %}Last Updated: {{ object.last_updated|date:"F j, Y" }}<br>{% endif %}
{% if object.created_by %}Added By: {% with object.created_by as U %}{% include "webview/t/user.html" %}{% endwith %}<br>{% endif %}
</td>
</tr>
</table>

<h2><img class="icon_header" src="{{ MEDIA_URL }}music.png" alt="" />Songs Connected To This Artist</h2>
<table class="songlist">
<tr>
 <th>Song Title</th>
 <th>Artist</th>
 <th>Length</th>
 <th>Status</th>
</tr>
{% for song in object.song_set.all %}
<tr class="{% cycle 'row1' 'row2' %}">
{% include "webview/t/songlist.html" %}
</tr>
{% endfor %}
</table>
{% endblock %}
